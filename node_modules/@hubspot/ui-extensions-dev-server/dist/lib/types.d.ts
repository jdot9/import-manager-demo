import { PLATFORM_VERSION, PRIVATE_APP, PUBLIC_APP } from './constants.ts';
import { LocalDevUrlMapping } from '@hubspot/app-functions-dev-server';
export interface ObjectTypes {
    name: string;
}
export interface ExtensionConfig {
    type: string;
    data: {
        title: string;
        location: string;
        module: {
            file: string;
        };
        objectTypes: ObjectTypes[];
        uid?: string;
    };
}
export interface ExtensionOutputDataConfig {
    appName: string;
    title: string;
    location: string;
    module: {
        file: string;
    };
    objectTypes: ObjectTypes[];
    uid?: string;
    sourceId?: string | null;
}
export interface ExtensionOutputConfig extends ExtensionConfig {
    type: string;
    output: string;
    path: string;
    extensionPath: string;
    extensionConfigPath: string;
    data: ExtensionOutputDataConfig;
    appConfig?: AppConfig;
}
export interface ExtensionConfigMap {
    [key: string]: ExtensionOutputConfig;
}
interface CardConfig {
    file: string;
}
export interface ProjectConfig {
    name: string;
    srcDir: string;
    platformVersion?: PlatformVersion;
}
export interface PrivateAppConfig {
    name: string;
    description: string;
    scopes: string[];
    public: boolean;
    extensions: {
        crm: {
            cards: CardConfig[];
        };
    };
    uid?: string;
}
export interface LocalAppConfig {
    proxy: LocalDevUrlMapping;
}
export interface PublicAppAuth {
    preventAdditionalScopes: boolean;
    preventOptionalScopes: boolean;
    redirectUrls: string[];
    requiredScopes: string[];
    optionalScopes: string[];
    additionalScopes: string[];
}
export declare enum UnifiedAppAuthTypes {
    OAUTH = "OAUTH",
    STATIC = "STATIC"
}
export interface UnifiedAppAuth {
    type: UnifiedAppAuthTypes;
    redirectUrls?: string[];
    requiredScopes?: string[];
    optionalScopes?: string[];
    conditionallyRequiredScopes?: string[];
}
export type AppAuth = PublicAppAuth | UnifiedAppAuth;
export interface PublicAppConfig {
    name: string;
    uid: string;
    logo?: string;
    description?: string;
    allowedUrls?: string[];
    auth?: AppAuth;
    support?: {
        supportUrl: string;
        supportEmail: string;
        documentationUrl: string;
        supportPhone: string;
    };
    extensions: {
        crm: {
            cards: CardConfig[];
        };
    };
}
export interface NonCanonicalAppMetadata {
    isPublicApp?: boolean;
}
export type AppConfig = (PrivateAppConfig | PublicAppConfig) & NonCanonicalAppMetadata;
export interface ProjectComponent {
    type: typeof PUBLIC_APP | typeof PRIVATE_APP;
    config: AppConfig;
    path: string;
}
export interface ProjectComponentMap {
    [key: string]: ProjectComponent;
}
export type UnifiedCardConfig = {
    uid: string;
    type: 'card';
    config: {
        name: string;
        description?: string;
        location: string;
        entrypoint: string;
        objectTypes?: string[];
        previewImage?: {
            file: string;
            altText: string;
        };
    };
};
export declare enum UnifiedComponentTypes {
    CARD = "CARD",
    APPLICATION = "APPLICATION",
    SETTINGS = "SETTINGS",
    PAGE = "PAGE"
}
export type UnifiedExtensionComponent = Omit<UnifiedCardConfig, 'type'> & {
    componentType: UnifiedComponentTypes.CARD | UnifiedComponentTypes.SETTINGS | UnifiedComponentTypes.PAGE;
    componentDeps: {
        app: string;
    };
    metaFilePath: string;
    files: {};
    localDev: {
        componentRoot: string;
        componentConfigPath: string;
    };
};
export interface UnifiedAppComponent {
    uid: string;
    config: {
        description: string;
        name: string;
        logo?: string;
        auth: UnifiedAppAuth;
        permittedUrls?: {
            fetch: string[];
            iframe: string[];
            img: string[];
        };
        support?: {
            supportEmail: string;
            documentationUrl: string;
            supportUrl: string;
            supportPhone: string;
        };
        variables?: {
            [key: string]: string | number | boolean;
        };
    };
    componentType: UnifiedComponentTypes.APPLICATION;
    componentDeps: {};
    metaFilePath: string;
    files: {};
    localDev: {
        componentRoot: string;
        componentConfigPath: string;
    };
}
export type UnifiedAppConfig = Omit<PublicAppConfig, 'auth'> & {
    auth: UnifiedAppAuth;
    isPublicApp: boolean;
    variables?: {
        [key: string]: string | number | boolean;
    };
};
export type UnifiedComponent = UnifiedExtensionComponent | UnifiedAppComponent;
export interface UnifiedProjectComponentMap {
    [key: string]: UnifiedComponent;
}
export interface BaseMessage {
    appName: string;
    title: string;
    callback: string;
    sourceId?: string | null;
    portalId?: number;
}
export interface ExtensionMetadata {
    baseMessage: BaseMessage;
    config: ExtensionOutputConfig;
}
export type PlatformVersion = (typeof PLATFORM_VERSION)[keyof typeof PLATFORM_VERSION];
export interface FunctionMetadata {
    scope?: 'Global' | 'Local';
    defined?: boolean;
    invoked?: boolean;
}
export type DataDependency = {
    referenceId: string;
    properties: {
        type: 'CrmRecordProperties';
        recordProperties: string[];
        options: {
            [key: string]: any;
        };
    } | {
        type: 'CrmRecordAssociationProperties';
        toObjectTypeId: string;
        requestProperties: string[];
        paginationOptions: {
            [key: string]: any;
        };
        options: {
            [key: string]: any;
        };
    };
};
export type NodeValue = string | number | boolean | null | undefined | RegExp | bigint | symbol | NodeValue[] | NodeObject;
export type NodeObject = {
    [key: string]: NodeValue;
};
export interface SourceCodeMetadata {
    functions: {
        [functionName: string]: FunctionMetadata;
    };
    badImports: string[];
    dataDependencies: {
        importedHooks: {
            [hookName: string]: string;
        };
        dependencies: DataDependency[];
    };
    variableDeclarations: Map<string, NodeValue>;
}
export interface FunctionInvocationCheck {
    functionName: string;
}
export type SourceCodeChecks = FunctionInvocationCheck[];
export interface Logger {
    info: (...args: any[]) => void;
    debug: (...args: any[]) => void;
    warn: (...args: any[]) => void;
    error: (...args: any[]) => void;
}
export interface AppExtensionMapping {
    name: string;
    value: ExtensionOutputConfig;
}
export interface DevModeStartArguments {
    accountId?: number;
    requestPorts?: (requestPortsData: Array<{
        instanceId: string;
        port?: number;
    }>) => Promise<{
        [instanceId: string]: number;
    }>;
    projectConfig?: ProjectConfig;
}
export interface DevModeBaseSetupArguments {
    onUploadRequired?: VoidFunction;
    logger: Logger;
    urls: {
        api: string;
        web: string;
    };
    setActiveApp: (appUid: string | undefined) => Promise<void>;
    choices?: AppExtensionMapping[];
}
export interface DevModeSetupArguments extends DevModeBaseSetupArguments {
    components: ProjectComponentMap;
}
export interface UnifiedDevModeSetupArguments extends DevModeBaseSetupArguments {
    components: UnifiedProjectComponentMap;
    profileData?: ProfileVariables;
}
export type ProfileVariableValue = string | number | boolean;
export type ProfileVariables = Record<string, ProfileVariableValue>;
export interface ManifestConfig {
    variables?: ProfileVariables;
}
export {};
