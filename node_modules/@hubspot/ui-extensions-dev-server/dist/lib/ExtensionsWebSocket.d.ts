import { Server } from 'http';
import { IncomingMessage } from 'http';
import { WebSocket } from 'ws';
import { DevServerState } from './DevServerState.ts';
export declare const ALLOWED_ORIGIN_PATTERNS: RegExp[];
export declare function isAllowedOrigin(origin: string | undefined): boolean;
type WebSocketMessage = {
    event: string;
} & Record<string, unknown>;
export declare class ExtensionsWebSocket {
    private wss;
    private logger;
    private keepAliveIntervalId?;
    private clientAliveness;
    constructor(httpServer: Server, devServerState: DevServerState);
    private setupUpgradeHandler;
    private setupErrorHandlers;
    private setupClientHandlers;
    private startKeepAlive;
    broadcast(message: WebSocketMessage): void;
    onConnection(handler: (ws: WebSocket, request: IncomingMessage) => void): void;
    get clientCount(): number;
    close(): Promise<void>;
}
export {};
