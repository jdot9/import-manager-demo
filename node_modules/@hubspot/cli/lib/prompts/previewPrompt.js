import path from 'path';
import { getCwd } from '@hubspot/local-dev-lib/path';
import { promptUser } from './promptUtils.js';
import { lib } from '../../lang/en.js';
export async function previewPrompt(promptOptions = {}) {
    return promptUser([
        {
            name: 'src',
            message: lib.prompts.previewPrompt.enterSrc,
            when: !promptOptions.src,
            default: '.',
            validate: (input) => {
                if (!input) {
                    return lib.prompts.previewPrompt.errors.srcRequired;
                }
                return true;
            },
        },
        {
            name: 'dest',
            message: lib.prompts.previewPrompt.enterDest,
            when: !promptOptions.dest,
            default: path.basename(getCwd()),
            validate: (input) => {
                if (!input) {
                    return lib.prompts.previewPrompt.errors.destRequired;
                }
                return true;
            },
        },
    ]);
}
export async function previewProjectPrompt(themeComponents) {
    return promptUser([
        {
            name: 'themeComponentPath',
            message: lib.prompts.previewPrompt.themeProjectSelect,
            type: 'list',
            choices: themeComponents.map(t => {
                const themeName = path.basename(t.path);
                return {
                    name: themeName,
                    value: t.path,
                };
            }),
        },
    ]);
}
