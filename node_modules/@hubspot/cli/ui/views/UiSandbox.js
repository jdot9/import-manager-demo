import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Box, Text } from 'ink';
import { useState } from 'react';
import { HorizontalSelectPrompt } from '../components/HorizontalSelectPrompt.js';
import { getComponentOptions, populatedComponents, } from '../lib/ui-testing-utils.js';
import { useTerminalSize } from '../lib/useTerminalSize.js';
import { CONTAINER_STYLES } from '../styles.js';
export function getUiSandbox(props) {
    return _jsx(UiSandbox, { ...props });
}
export function UiSandbox({ componentName }) {
    const componentOptions = getComponentOptions();
    const [selectedComponent, setSelectedComponent] = useState(componentName ? populatedComponents[componentName] : undefined);
    const mapStringToComponent = (str) => {
        setSelectedComponent(populatedComponents[str] || undefined);
    };
    const getFunctionArguments = (signature) => {
        const startIndex = signature.indexOf('(');
        const endIndex = signature.indexOf(')');
        const functionArgs = signature.slice(startIndex, endIndex + 1);
        return functionArgs;
    };
    const size = useTerminalSize(20);
    return (_jsxs(Box, { flexDirection: "column", height: size.rows, children: [_jsx(HorizontalSelectPrompt, { defaultOption: componentName, options: componentOptions, onSelect: mapStringToComponent }), selectedComponent?.component, selectedComponent?.signature && (_jsxs(Box, { ...CONTAINER_STYLES, gap: 1, borderStyle: "classic", children: [_jsx(Text, { children: "Signature:" }), _jsx(Text, { children: getFunctionArguments(selectedComponent?.signature) })] }))] }));
}
