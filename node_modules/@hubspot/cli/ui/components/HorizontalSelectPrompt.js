import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Box, Text, useInput } from 'ink';
import { useState } from 'react';
import { CONTAINER_STYLES, INK_COLORS } from '../styles.js';
export function getHorizontalSelectPrompt(props) {
    return _jsx(HorizontalSelectPrompt, { ...props });
}
export function HorizontalSelectPrompt({ defaultOption, options, onSelect, prompt, }) {
    const [selectedIndex, setSelectedIndex] = useState(defaultOption && options.indexOf(defaultOption) !== -1
        ? options.indexOf(defaultOption)
        : 0);
    const moveRight = () => {
        setSelectedIndex(prev => (prev < options.length - 1 ? prev + 1 : 0));
    };
    const moveLeft = () => {
        setSelectedIndex(prev => (prev > 0 ? prev - 1 : options.length - 1));
    };
    useInput((_, key) => {
        if (key.leftArrow) {
            moveLeft();
        }
        else if (key.rightArrow) {
            moveRight();
        }
        else if (key.return) {
            onSelect(options[selectedIndex]);
        }
    });
    return (_jsxs(Box, { ...CONTAINER_STYLES, flexDirection: "column", marginTop: 1, width: "100%", alignSelf: "center", justifyContent: "center", children: [prompt && (_jsx(Box, { marginBottom: 1, children: _jsx(Text, { children: prompt }) })), _jsx(Box, { flexDirection: "row", justifyContent: "center", flexWrap: "wrap", width: "100%", gap: 1, children: options.map((option, index) => (_jsx(Box, { children: _jsx(Text, { backgroundColor: index === selectedIndex ? INK_COLORS.INFO_BLUE : undefined, bold: index === selectedIndex, children: ` ${option} ` }) }, index))) }), _jsx(Box, { marginTop: 1, alignSelf: "center", justifyContent: "center", children: _jsx(Text, { dimColor: true, children: "Use arrow keys to navigate, Enter to select" }) })] }));
}
