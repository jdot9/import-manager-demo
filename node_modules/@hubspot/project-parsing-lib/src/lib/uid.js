"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MAX_UID_LENGTH = void 0;
exports.validateUid = validateUid;
exports.coerceToValidUid = coerceToValidUid;
const copy_1 = require("../lang/copy");
exports.MAX_UID_LENGTH = 64;
function validateUid(uid) {
    if (uid === '' || !uid) {
        return copy_1.errorMessages.validation.emptyUid;
    }
    if (uid.length > exports.MAX_UID_LENGTH) {
        return copy_1.errorMessages.validation.uidTooLong;
    }
    if (!/^[a-zA-Z0-9_\-.]+$/.test(uid)) {
        return copy_1.errorMessages.validation.invalidUid;
    }
}
function coerceToValidUid(potentialUid) {
    if (typeof potentialUid !== 'string') {
        return undefined;
    }
    const newUid = potentialUid.replace(/[^a-zA-Z0-9_\-.]/g, '');
    return newUid.length === 0 ? undefined : newUid.substring(0, exports.MAX_UID_LENGTH);
}
